<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>biometryassist R Package • biometryassist</title><script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="biometryassist R Package"><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=G-971LPN0BS4"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-971LPN0BS4');
</script></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">biometryassist</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.3.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="articles/installing-asreml-r.html">Installing ASReml-R</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/biometryhub/biometryassist/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-title-body">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>biometryassist R Package</h1>
      <small class="dont-index">Source: <a href="https://github.com/biometryhub/biometryassist/blob/main/.github/copilot-instructions.md" class="external-link"><code>.github/copilot-instructions.md</code></a></small>
    </div>

<div id="biometryassist-r-package" class="section level1">

<p>The biometryassist package is an R package for designing and analyzing agronomic-style experiments. It provides functions to aid in experimental design and statistical analysis, especially for teaching these concepts. The package is available on CRAN and has comprehensive testing and documentation.</p>
<p>Always reference these instructions first and fallback to search or bash commands only when you encounter unexpected information that does not match the info here.</p>
<div class="section level2">
<h2 id="working-effectively">Working Effectively<a class="anchor" aria-label="anchor" href="#working-effectively"></a></h2>
<ul><li>Install R and system dependencies:
<ul><li><code>sudo apt-get update &amp;&amp; sudo apt-get install -y r-base r-base-dev</code></li>
<li>
<strong>NEVER CANCEL</strong>: APT installation takes 5-10 minutes on a fresh system. Set timeout to 15+ minutes.</li>
<li>Install essential R packages via APT: <code>sudo apt-get install -y r-cran-ggplot2 r-cran-curl r-cran-rlang r-cran-testthat r-cran-lattice r-cran-scales r-cran-stringi r-cran-xml2 r-cran-knitr r-cran-rmarkdown r-cran-devtools</code>
</li>
<li>
<strong>NEVER CANCEL</strong>: R package installation via APT takes 5-15 minutes. Set timeout to 20+ minutes.</li>
</ul></li>
<li>Build the package:
<ul><li>
<code>R CMD build --no-build-vignettes .</code> – takes under 1 minute</li>
<li>
<code>R CMD check --no-manual --no-vignettes --no-tests *.tar.gz</code> – basic check takes 2-3 minutes without dependencies</li>
</ul></li>
<li>Install dependencies and full testing (when CRAN connectivity works):
<ul><li>Install missing dependencies: <code>sudo R -e "install.packages(c('agricolae', 'askpass', 'cowplot', 'emmeans', 'multcompView', 'pracma'), repos='https://cloud.r-project.org')"</code>
</li>
<li>
<strong>NEVER CANCEL</strong>: Dependency installation can take 10-20 minutes depending on network. Set timeout to 30+ minutes.</li>
<li>Full package check: <code>R CMD check *.tar.gz</code>
</li>
<li>
<strong>NEVER CANCEL</strong>: Full R CMD check takes 5-15 minutes with all tests. Set timeout to 20+ minutes.</li>
</ul></li>
<li>Run tests:
<ul><li>
<code>R -e "library(testthat); test_dir('tests/testthat')"</code> – takes 3-8 minutes for full test suite</li>
<li>
<strong>NEVER CANCEL</strong>: Complete test suite includes statistical computations and can take 8+ minutes. Set timeout to 15+ minutes.</li>
</ul></li>
</ul></div>
<div class="section level2">
<h2 id="validation">Validation<a class="anchor" aria-label="anchor" href="#validation"></a></h2>
<ul><li>ALWAYS build and test your changes using <code>R CMD build</code> and <code>R CMD check</code> before committing.</li>
<li>ALWAYS run at least a subset of tests relevant to your changes using testthat.</li>
<li>Test core functionality manually when making changes to key functions:
<ul><li>Design functions: <code>design(type = "crd", treatments = LETTERS[1:4], reps = 3, nrows = 3, ncols = 4, quiet = TRUE)</code>
</li>
<li>Analysis functions: <code><a href="reference/multiple_comparisons.html">multiple_comparisons()</a></code> with sample data</li>
<li>Template functions: <code>use_template(open = FALSE)</code>
</li>
</ul></li>
<li>The CI pipeline (<code>.github/workflows/R-CMD-check.yaml</code>) tests on multiple R versions and operating systems. Ensure your changes pass local checks first.</li>
<li>Check that documentation builds correctly: <code>R -e "devtools::document()"</code>
</li>
</ul></div>
<div class="section level2">
<h2 id="common-tasks">Common Tasks<a class="anchor" aria-label="anchor" href="#common-tasks"></a></h2>
<div class="section level3">
<h3 id="package-structure">Package Structure<a class="anchor" aria-label="anchor" href="#package-structure"></a></h3>
<pre><code>biometryassist/
├── DESCRIPTION          # Package metadata and dependencies
├── NAMESPACE           # Exported functions and imports
├── R/                  # R source code
│   ├── design.R        # Experimental design functions
│   ├── mct.R          # Multiple comparisons
│   ├── install_asreml.R # ASReml-R installation helper
│   └── use_template.R  # Analysis templates
├── tests/testthat/     # Test files using testthat framework
├── man/               # Function documentation
├── inst/              # Package data and templates
├── vignettes/         # Package documentation
└── .github/workflows/ # CI/CD pipelines</code></pre>
</div>
<div class="section level3">
<h3 id="key-functions-and-their-purpose">Key Functions and Their Purpose<a class="anchor" aria-label="anchor" href="#key-functions-and-their-purpose"></a></h3>
<p><strong>Design Functions:</strong> - <code><a href="reference/design.html">design()</a></code> - Create experimental designs (CRD, RCBD, LSD, Split-plot, etc.) - <code><a href="reference/des_info.html">des_info()</a></code> - Get information about design parameters - <code><a href="reference/autoplot.html">autoplot()</a></code> - Plot experimental designs</p>
<p><strong>Analysis Functions:</strong> - <code><a href="reference/multiple_comparisons.html">multiple_comparisons()</a></code> - Statistical comparisons with corrections - <code><a href="reference/resplot.html">resplot()</a></code> - Residual plots for model diagnostics - <code><a href="reference/variogram.html">variogram()</a></code> - Spatial analysis tools - <code><a href="reference/logl_test.html">logl_test()</a></code> - Likelihood ratio tests</p>
<p><strong>Utility Functions:</strong> - <code><a href="reference/use_template.html">use_template()</a></code> - Copy analysis templates to working directory - <code><a href="reference/install_asreml.html">install_asreml()</a></code> - Install the commercial ASReml-R package - <code><a href="reference/heat_map.html">heat_map()</a></code> - Create heatmaps for experimental data</p>
</div>
<div class="section level3">
<h3 id="testing-approach">Testing Approach<a class="anchor" aria-label="anchor" href="#testing-approach"></a></h3>
<p>The package uses testthat for testing with extensive coverage: - <strong>Unit tests</strong>: Individual function behavior in <code>tests/testthat/test-*.R</code> - <strong>Integration tests</strong>: Cross-function workflows in <code>tests/testthat/test-all-w2.r</code> - <strong>Snapshot tests</strong>: Expected output validation using <code>expect_snapshot_output()</code> - <strong>Visual tests</strong>: Plot validation using <code><a href="https://vdiffr.r-lib.org/reference/expect_doppelganger.html" class="external-link">vdiffr::expect_doppelganger()</a></code></p>
<p>When making changes: 1. Run relevant test files: <code>R -e "testthat::test_file('tests/testthat/test-design.R')"</code> 2. Update snapshots if output changes: <code>R -e "testthat::snapshot_review()"</code> 3. For new functions, add corresponding test files following existing patterns</p>
</div>
<div class="section level3">
<h3 id="common-issues-and-solutions">Common Issues and Solutions<a class="anchor" aria-label="anchor" href="#common-issues-and-solutions"></a></h3>
<p><strong>Network connectivity issues:</strong> - If <code><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages()</a></code> fails with CRAN connectivity, use APT packages: <code>sudo apt-get install r-cran-*</code> - For development packages not in APT, try alternative repos or install from source</p>
<p><strong>Build failures:</strong> - Missing dependencies: Check DESCRIPTION file and install required packages - Vignette build errors: Use <code>--no-build-vignettes</code> flag for R CMD build - Test failures: Run individual test files to isolate issues</p>
<p><strong>Documentation:</strong> - Update function documentation in R source files using roxygen2 comments - Rebuild documentation: <code>R -e "devtools::document()"</code> - Check documentation: <code>R -e "devtools::check_man()"</code></p>
</div>
<div class="section level3">
<h3 id="package-dependencies">Package Dependencies<a class="anchor" aria-label="anchor" href="#package-dependencies"></a></h3>
<p><strong>Required (Imports):</strong> - Statistical: <code>agricolae</code>, <code>emmeans</code>, <code>multcompView</code>, <code>pracma</code> - Visualization: <code>ggplot2</code>, <code>cowplot</code>, <code>lattice</code>, <code>scales</code> - Utilities: <code>curl</code>, <code>askpass</code>, <code>rlang</code>, <code>stringi</code>, <code>xml2</code></p>
<p><strong>Optional (Suggests):</strong> - Testing: <code>testthat</code>, <code>mockery</code>, <code>withr</code>, <code>vdiffr</code> - Documentation: <code>knitr</code>, <code>rmarkdown</code>, <code>covr</code> - Export: <code>openxlsx</code></p>
<p><strong>Enhanced packages:</strong> - <code>asreml</code> (commercial license required) - <code>lme4</code>, <code>nlme</code>, <code>sommer</code> (alternative mixed model packages)</p>
</div>
<div class="section level3">
<h3 id="development-workflow">Development Workflow<a class="anchor" aria-label="anchor" href="#development-workflow"></a></h3>
<ol style="list-style-type: decimal"><li>Make changes to R code in <code>R/</code> directory</li>
<li>Update tests in <code>tests/testthat/</code> as needed</li>
<li>Build package: <code>R CMD build --no-build-vignettes .</code>
</li>
<li>Check package: <code>R CMD check *.tar.gz</code>
</li>
<li>Run specific tests: <code>R -e "testthat::test_file('tests/testthat/test-*.R')"</code>
</li>
<li>Document changes: <code>R -e "devtools::document()"</code>
</li>
<li>Commit changes after validation</li>
</ol><p>This package follows standard R package development practices with comprehensive testing and GitHub Actions CI/CD integration.</p>
</div>
</div>
</div>

  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Sharon Nielsen, Sam Rogers, Annie Conway, University of Adelaide, Grains Research and Development Corporation.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

